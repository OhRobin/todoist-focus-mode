---
layout: base.njk
title: "Hello World"
---
<h2>Todoist output</h2>
<code>{{ td }}</code>
<button onclick="showProjects()">Show first task</button>
<script>
    async function showProjects() {
        let url = "https://api.todoist.com/rest/v2/tasks";
        let response = await fetch(url, {
            headers: {
                Authorization: "Bearer eed6c283388e7038ab617c946eb3a9da51888228"
            }
        });

        if (response.ok) { // if HTTP-status is 200-299
            // get the response body (the method explained below)
            let taskList = await response.json();
            console.log(taskList)
            let firstTask = taskList[0].content
            const body = document.body;
            const div = document.createElement('div')
            body.append(div)
            div.innerText = firstTask
        } else {
            alert("HTTP-Error: " + response.status);
        }
    }
</script>